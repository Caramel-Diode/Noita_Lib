# 2024.11.6

- 增加状态组件 `<noita-status>`
- 增加仓库组件 `<noita-inventory>`
- - 魔杖内动态法术序列使用`<noita-inventory>`实现
- 修复一些类型声明中的错误
- 魔杖增加简易面板模式
- - 允许显示冻结图标和警告图标
- 魔杖允许嵌入多个 `<data value="法术序列表达式">标题</data>` 来表示多个动态法术序列
- 实体数据重构
- - 提供解析服务
- 实体面板以组件形式展示
- - 法术内的实体数据也因此改变
- 基本面板元素现在可以通过 `<noita-panel prompt-for="目标元素id" prompt-for.selector="目标元素选择器">` 向目标元素提供hover面板
- 实现多线程精灵图拆分器，图像数据现在会在首次运行时缓存到`indexedDb`，加快后续加载速度.
- 为`$class`函数提供了完善的类型支持
- 为`h`,`css`函数提供了完善的类型支持
- 加入新的ployfill函数`chunks`
- 完善 html 标签自动补齐支持

# 2024.7.22

-   修复材料反应与材料的关联错误
-   移除多余的材料图标精灵图
-   压缩材料数据库与材料反应数据库
    -   将 布尔值 合并为数字 按 bit 位解析
    -   材料名替换为索引
    -   实现 `toChunks` 函数用于切分数组
-   更新材料数据库的数据
-   修复材料导电性问题
-   新增加魔球组件 `<noita-orb>`
-   DOM 操作从字符串模板解析更替为 h 函数，改善性能问题。
-   类型支持完善
-   为 html 标签的自动补全完善支持
-   法术图标模式下支持角标
    -   嵌入其它元素 ==使用下面的类名控制角标位==
        -   `[1]` `lt` `left-top` 左上角
        -   `[2]` `rt` `right-top` 右上角
        -   `[3]` `lb` `left-bottom` 左下角
        -   `[4]` `rb` `right-bottom` 右下角
    -   为`display`的值添加参数 如 `icon:action`

# 2024.7.7

> **破坏性更新**
> 此次更新会明显降低性能

-   增加解析工具(转换为 js 可用的数据)
    -   提供可以运行 lua 的 nodejs 原生模块。
    -   提供后端 http 服务, 允许前端请求 lua 代码执行结果与 Noita 的 data.wak 解包数据。
    -   目前支持 材料、法术、天赋、魔杖的数据解析。
    -   改进了 JSON5 序列化函数，结果将使用最短的等价字面量表示。
-   改用了统一可读性更高的面板属性加载器。
-   DOM 操作更替为使用 html 字符串模板解析函数操作，增加可读性。
-   继承增加中间层类，自动生成 html 属性与 js 对象属性的双向绑定。
-   法术数据库重构
    -   修正数据该用表达式描述
        -   支持修正模式的显示
        -   支持前置后置修正的显示 黄色/蓝色方点
        -   支持友方伤害显示
        -   支持阵形角度显示
        -   支持提供投射物的具体方式 后置不同颜色方点
    -   支持名称与描述的翻译键 暂无用途
    -   解锁条件使用了变量名替换数据表中的值，提高压缩比
    -   生成概率与等级使用对象字面量表示，提高压缩比
    -   展开所有数据项(移除冗余数组方括号)，提高压缩比
    -   最大使用次数与次数可否无限化合并为一项数据(`0`表示无限 负数表示不可无限化)， 提高压缩比
-   法术数据库更进到最新版本
-   法术面板现在可以显示生成概率/权重
-   魔杖数据库重构
    -   属性匹配数据库(提高压缩比)
        -   移除无意义魔杖名
        -   展开所有数据项
-   新特殊魔杖 电锯(支持动画)
-   新增加滑动条组件
-   现在面板组件支持多个标签页
-   法术现在可以使用对应类型的空法术(不显示图标)
-   天赋现在可以使用对应类型的空天赋(不显示图标)
-   组件内除`svg`外的图片更换为`img`，现在支持导出任意尺寸的 base64，支持多帧动画。
-   材料数据库反应继承错误修正
-   嵌入 XML 解析器 (动态解析 XML 实体预备)
-   嵌入 CSV 解析器 (多语言兼容性预备)
-   CSS 改进为嵌套型
-   重构构建器，暂时移除构建器的日志功能。
-   构建器现在支持构建为 ESM 版本与普通版本，SF(单文件)版本与分离式版本。
-   添加类型支持文件(`*.d.ts`)
-   暂时移除了`.vscode`中的代码片段
-   在`.vscode`中添加了自定义标签的数据支持

